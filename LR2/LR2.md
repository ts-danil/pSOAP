# Лабораторная работа №2.  
# Исследование сетевых параметров публичных DNS серверов
## Цель работы:  
Проанализировать сетевые параметры публичных DNS серверов, сделать мотивированный вывод о предпочтительных серверах.  
### Исследуемые провайдеры DNS:  
  1. Google Public DNS
  2. Cloudflare DNS
  3. OpenDNS
  4. DNS провайдера
## Исходные данные:  
### Конфигурация аппаратного обеспечения и общесистемного ПО:  
Процессор: 4 × Intel® Core™ i5-3230M CPU @ 2.60GHz  
Память: 7,89 Гб ОЗУ  
ОС: Windows 10 x64   

### Используемое ПО:  
+ Google Chrome 81.0.4044.122  
+ Rstudio IDE 

### Используемые команды для командной строки:  
+ ping
+ tracert

### Используемые интернет-ресурсы: 
+ Whois

## Варианты решения задачи:  
1. Выполнение работы с ипользованием командной строки и интернет ресурсов.  
2. Выполнение работы с ипользованием чужого отчета, смекалки и божей помощи.  
В данной работе используется первый вариант решения задачи. 
## Общий план выполнения:  
  1. По исследуемым серверам собрать следующие данные:  
    1) Маршрут  
    2) Местоположение каждого узла маршрута к DNS-серверу  
    3) Организацию, владеющую каждым узлом маршрута к DNS-серверу  
    4) Среднюю RTT (round trip time) к DNS-серверу  
  2. Выделить те узлы маршрута, которые вносят наибольшую временную задержку при передаче
  3. Сравнить сетевые параметры DNS серверов  
  
## Содержание лабораторной работы:   
### 1. Google Public DNS  
Данный провайдер DNS имеет адрес 8.8.8.8  
Для начала проверим доступность этого адреса с помощью утилиты ping.  
PING - основная утилита командной строки Windows для проверки соединений в сетях на основе TCP/IP. Команда PING с помощью отправки сообщений с эхо-запросом по протоколу ICMP проверяет соединение на уровне протокола IP с другим устройством, поддерживающим TCP/IP. После каждой передачи выводится соответствующее сообщение с эхо-ответом.  
```{r cache=TRUE} 
system("ping 8.8.8.8 ", intern = TRUE)
```
Адрес оказался доступным, поэтому можно сделать трассировку маршрута и узнать, через какие узлы проходит пакет до конечного адреса  
В командной строке Windows можно сделать это с помощью утилиты tracert:  
```{r cache=TRUE} 
system("tracert 8.8.8.8", intern = TRUE)
```  
Каждая строка вывода команды tracert пронумерована, каждая такая строка называется шагом, хопом или прыжком. По умолчанию tracert в Windows отправляет три запроса на каждый хоп и получает от этого хопа ответы, если ответ не получен, то в первых трех столбцах мы видим символ «*», если ответ получен, то в первых трех столбцах указывается время прохождения пакета, а в следующем столбце Windows дает нам подсказку о причинах, по которым удаленный узел нам не ответил или его адрес, если узел ответил. 

| №  | 1        | 2       | 3      |Среднее| Промежуточные узлы маршрута             | Организация                   | Город         |
|----|:--------:|:-------:|:------:|:-----:|-----------------------------------------|-------------------------------|---------------|
|  1 |    1 ms  |   1 ms  |  <1 ms | 1  ms | 192.168.0.1                             |                               |               |
|  2 |    2 ms  |   1 ms  |   1 ms | 1  ms | 46.188.55.1                             | 2COM Co ltd.                  | Moscow        |
|  3 |    8 ms  |   3 ms  |   2 ms | 4  ms | 80.253.16.29                            | DISKOM-NET                    | Moscow        |
|  4 |    4 ms  |   3 ms  |  44 ms | 17 ms | 80.253.16.82                            | OSTOJENKA-ARHITEKTURNOE-BYURO | Moscow        |
|  5 |    3 ms  |   2 ms  |   2 ms | 2  ms | 80.253.16.81                            | OSTOJENKA-ARHITEKTURNOE-BYURO | Moscow        |
|  6 |    4 ms  |   8 ms  |   3 ms | 5  ms | 108.170.250.129                         | Google LLC (GOGL)             | Mountain View |
|  7 |   11 ms  |   6 ms  |  14 ms | 10 ms | 108.170.250.146                         | Google LLC (GOGL)             | Mountain View |
|  8 |   18 ms  |  19 ms  |  18 ms | 18 ms | 216.239.50.2                            | Google LLC (GOGL)             | Mountain View |
|  9 |   19 ms  |  23 ms  |  19 ms | 20 ms | 108.170.232.251                         | Google LLC (GOGL)             | Mountain View |
| 10 |   37 ms  |  22 ms  |  27 ms | 27 ms | 172.253.51.243                          | Google LLC (GOGL)             | Mountain View |
| 11 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 12 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 13 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 14 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 15 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 16 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 17 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 18 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 19 |    *     |   *     |   *    | *     | Превышен интервал ожидания для запроса. |                               |               |
| 20 |   17 ms  |  16 ms  |  17 ms | 17 ms | dns.google [8.8.8.8]                    | Level 3 Parent, LLC (LPL-141) | Monroe        |  
  
Наибольшую временную задержку при передаче пакета вносит узел на 10 строке - организация Google LLC (GOGL) с адресом 172.253.51.243 .   
Среднее RTT (round trip time) к DNS-серверу по моим результатам составляет 122 ms.

### 2. Cloudflare DNS
Данный провайдер DNS имеет адрес 1.1.1.1  
Для начала проверим доступность этого адреса с помощью утилиты ping.  
PING - основная утилита командной строки Windows для проверки соединений в сетях на основе TCP/IP. Команда PING с помощью отправки сообщений с эхо-запросом по протоколу ICMP проверяет соединение на уровне протокола IP с другим устройством, поддерживающим TCP/IP. После каждой передачи выводится соответствующее сообщение с эхо-ответом.  
```{r cache=TRUE} 
system("ping 1.1.1.1", intern = TRUE)
```
Адрес оказался доступным, поэтому можно сделать трассировку маршрута и узнать, через какие узлы проходит пакет до конечного адреса.  
В командной строке Windows можно сделать это с помощью утилиты tracert:  
```{r cache=TRUE} 
system("tracert 1.1.1.1", intern = TRUE)
```  
Каждая строка вывода команды tracert пронумерована, каждая такая строка называется шагом, хопом или прыжком. По умолчанию tracert в Windows отправляет три запроса на каждый хоп и получает от этого хопа ответы, если ответ не получен, то в первых трех столбцах мы видим символ «*», если ответ получен, то в первых трех столбцах указывается время прохождения пакета, а в следующем столбце Windows дает нам подсказку о причинах, по которым удаленный узел нам не ответил или его адрес, если узел ответил.  

| №  | 1        | 2       | 3      |Среднее| Промежуточные узлы маршрута | Организация                    | Город         |
|----|:--------:|:-------:|:------:|:-----:|-----------------------------|--------------------------------|---------------| 
|  1  |   3 ms  |   1 ms  |  <1 ms | 2 ms  | 192.168.0.1                 |                                |               |
|  2  |   4 ms  |   2 ms  |   1 ms | 2 ms  | 46.188.55.1                 | 2COM Co ltd.                   | Moscow        | 
|  3  |   6 ms  |   2 ms  |  19 ms | 9 ms  | 80.253.16.29                | DISKOM                         | Moscow        |
|  4  |   9 ms  |   2 ms  |   4 ms | 5 ms  | 80.64.108.155               | CJSC Rascom                    | St.Petersburg |
|  5  |   4 ms  |   3 ms  |   3 ms | 3 ms  | 80.64.108.154               | CJSC Rascom                    | St.Petersburg |
|  6  |   3 ms  |   3 ms  |   3 ms | 3 ms  | 80.64.96.244                | CJSC Rascom                    | St.Petersburg |
|  7  |   5 ms  |   6 ms  |  16 ms | 9 ms  | 172.68.8.252                | Cloudflare, Inc.               | San Francisco |
|  8  |   8 ms  |   3 ms  |   3 ms | 5 ms  | 1.1.1.1                     | APNIC Research and Development | South Brisbane|  
  
Наибольшую временную задержку при передаче пакета вносят узлы на 3 и 7 строках - организация DISKOM с адресом 180.253.16.29 и организация Cloudflare, Inc. с адресом 172.68.8.252  
Среднее RTT (round trip time) к DNS-серверу по моим результатам составляет 38 ms.  

### 3. OpenDNS
Данный провайдер DNS имеет адрес 208.67.222.222  
Для начала проверим доступность этого адреса с помощью утилиты ping.  
PING - основная утилита командной строки Windows для проверки соединений в сетях на основе TCP/IP. Команда PING с помощью отправки сообщений с эхо-запросом по протоколу ICMP проверяет соединение на уровне протокола IP с другим устройством, поддерживающим TCP/IP. После каждой передачи выводится соответствующее сообщение с эхо-ответом.  
```{r cache=TRUE} 
system("ping 208.67.222.222", intern = TRUE)
```
Адрес оказался доступным, поэтому можно сделать трассировку маршрута и узнать, через какие узлы проходит пакет до конечного адреса.  
В командной строке Windows можно сделать это с помощью утилиты tracert:  
```{r cache=TRUE} 
system("tracert 208.67.222.222", intern = TRUE)
```  
Каждая строка вывода команды tracert пронумерована, каждая такая строка называется шагом, хопом или прыжком. По умолчанию tracert в Windows отправляет три запроса на каждый хоп и получает от этого хопа ответы, если ответ не получен, то в первых трех столбцах мы видим символ «*», если ответ получен, то в первых трех столбцах указывается время прохождения пакета, а в следующем столбце Windows дает нам подсказку о причинах, по которым удаленный узел нам не ответил или его адрес, если узел ответил.  

| №   | 1       | 2       | 3      |Среднее| Промежуточные узлы маршрута | Организация                         | Город         |
|-----|:-------:|:-------:|:------:|:-----:|-----------------------------|-------------------------------------|---------------| 
|  1  |  16 ms  |  <1 мс  |  17 ms | 11 ms | 192.168.0.1                 |                                     |               |
|  2  |   9 ms  |   2 ms  |   1 ms | 4 ms  | 46.188.55.1                 | 2COM Co ltd.                        | Moscow        |
|  3  |   4 ms  |   3 ms  |   3 ms | 3 ms  | 80.253.16.29                | DISKOM                              | Moscow        |
|  4  |  17 ms  |  12 ms  |   5 ms | 11 ms | 92.50.240.133               | PJSC Rostelecom                     | Moscow        |
|  5  |  33 ms  |  34 ms  |  59 ms | 42 ms | 217.107.67.31               | PJSC Rostelecom                     | Moscow        |
|  6  |  35 ms  |  30 ms  |  34 ms | 33 ms | 77.67.90.96                 | Tinet International Network         | Neu-Isenburg  |
|  7  |  51 ms  |  59 ms  |  54 ms | 55 ms | 213.200.117.202             | GTT                                 | Neu-Isenburg  |
|  8  |  52 ms  |  54 ms  |  58 ms | 55 ms | 77.67.66.70                 | Tiscali International Network B.V.  | Neu-Isenburg  |
|  9  |  49 ms  |  53 ms  |  49 ms | 50 ms | 208.67.222.222              | OPENDNS-NET-1                       | San Francisco |  
  
Наибольшую временную задержку при передаче пакета вносят узлы на 7 и 8 строках - организация GTT с адресом 213.200.117.202  и организация iscali International Network B.V. с адресом 77.67.66.70  
Среднее RTT (round trip time) к DNS-серверу по моим результатам составляет 264 ms.

### 4. DNS провайдера
Данный провайдер DNS имеет адрес 	195.98.160.26  
Для начала проверим доступность этого адреса с помощью утилиты ping.  
PING - основная утилита командной строки Windows для проверки соединений в сетях на основе TCP/IP. Команда PING с помощью отправки сообщений с эхо-запросом по протоколу ICMP проверяет соединение на уровне протокола IP с другим устройством, поддерживающим TCP/IP. После каждой передачи выводится соответствующее сообщение с эхо-ответом.  
```{r cache=TRUE} 
system("ping 195.98.160.26", intern = TRUE)
```
Адрес оказался доступным, поэтому можно сделать трассировку маршрута и узнать, через какие узлы проходит пакет до конечного адреса.  
В командной строке Windows можно сделать это с помощью утилиты tracert:  
```{r cache=TRUE} 
system("tracert 195.98.160.26", intern = TRUE)
```  
Каждая строка вывода команды tracert пронумерована, каждая такая строка называется шагом, хопом или прыжком. По умолчанию tracert в Windows отправляет три запроса на каждый хоп и получает от этого хопа ответы, если ответ не получен, то в первых трех столбцах мы видим символ «*», если ответ получен, то в первых трех столбцах указывается время прохождения пакета, а в следующем столбце Windows дает нам подсказку о причинах, по которым удаленный узел нам не ответил или его адрес, если узел ответил.  

| №   | 1       | 2       | 3      |Среднее| Промежуточные узлы маршрута | Организация                                | Город         |
|-----|:-------:|:-------:|:------:|:-----:|-----------------------------|--------------------------------------------|---------------|
|  1  |   3 ms  |   1 ms  |  20 ms | 8 ms  | 192.168.0.1                 |                                            |               |
|  2  |  10 ms  |   1 ms  |   2 ms | 4 ms  | 46.188.55.1                 | 2COM Co ltd.                               | Moscow        |
|  3  |   2 ms  |  10 ms  |   5 ms | 6 ms  | 172.31.246.205              | Internet Assigned Numbers Authority (IANA) | Los Angeles   |
|  4  |  10 ms  |   2 ms  |   2 ms | 5 ms  | 172.31.251.224              | Internet Assigned Numbers Authority (IANA) | Los Angeles   |
|  5  |   3 ms  |   1 ms  |   2 ms | 2 ms  | 80.253.16.113               | NACIONALNOE-BYURO-KREDITNIH-ISTORIY        | Moscow        |
|  6  |   2 ms  |   1 ms  |   1 ms | 1 ms  | 195.98.160.26               | 2COM Co ltd.                               | Moscow        |
  
Наибольшую временную задержку при передаче пакета вносит мой роутер с адресом 192.168.0.1 :( 
Среднее RTT (round trip time) к DNS-серверу по моим результатам составляет 26 ms.

## Оценка результата:  
Теперь произведем оценку полученных результатов, для наглядности построим диаграмму на основе известных данных.  
Напомню, что быстрее всего получилось установить связь с DNS сервером моего провайдеры, в среднем это занимает 26 ms.   
Вторым по скорости соединения стал Cloudflare DNS, среднее время соединения с ним - 38 ms.  
Далее получилось более медленное соединение с Google Public DNS, в среднем за 122 ms.   
Ну и последним в моем списке стал Open DNS, для подключения к нему требуется в среднем целых 264 ms.  
```{r cache=TRUE} 
time <- c(264, 122, 38, 26)
name <- c("Open DNS", "Google Public DNS",   "Cloudflare DNS", "DNS провайдера")
DNS <- data.frame(Name= name, Time = time)
palet=colorRampPalette(c("red","green"))
colors=palet(4)
par(mar = c(5, 10, 4, 2))
barplot(DNS$Time, 
        names.arg = DNS$Name, 
        horiz=TRUE, 
        las = 1,
        col = colors,
        xlab = "миллисекунд")
```
    
## Вывод:  
В результате выполнения лабораторной работы удалось проанализировать сетевые параметры публичных DNS серверов, сделать мотивированный вывод о предпочтительных серверах. Также во время выполнения работы был удивлен маршрутами и организациями, встречающимися на пути моих запросов.
